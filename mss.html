<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>çŸ¥è­˜å­¸ç¿’ - æ¦‚æ•¸å¤§å¸« 2026</title>
    <!-- å¼•ç”¨çµ±ä¸€çš„æ¨£å¼è¡¨ -->
    <link rel="stylesheet" href="ms.css">
    <style>
        .study-wrapper { position: relative; z-index: 2; max-width: 900px; margin: 40px auto; padding: 20px; }
        
        /* æ‡¸æµ®å›ä¸»é  - åŠ å¼·äº’å‹•æ„Ÿ */
        .home-float {
            position: fixed; top: 20px; left: 20px; z-index: 100;
            background: var(--primary); color: white; padding: 12px 24px; border-radius: 50px;
            text-decoration: none; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            transition: 0.3s; border: 2px solid rgba(255,255,255,0.2);
            display: flex; align-items: center; gap: 8px;
        }
        .home-float:hover { transform: scale(1.1) rotate(-2deg); background: #5649c0; }

        /* æ•™å­¸é‡é»å¡ç‰‡ */
        .concept-card {
            background: rgba(108, 92, 231, 0.15);
            border-left: 8px solid var(--primary);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            line-height: 1.8;
            animation: fadeIn 0.5s ease;
        }

        .formula-box {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 10px;
            font-size: 1.5rem;
            text-align: center;
            margin: 15px 0;
            border: 1px solid var(--primary);
            letter-spacing: 5px;
        }

        .cut-line { color: #ff7675; font-weight: bold; margin: 0 5px; text-decoration: underline; }

        /* ç·´ç¿’å€ */
        .practice-zone {
            border: 2px dashed var(--accent);
            padding: 25px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .highlight { color: var(--accent); font-weight: bold; }
        
        .ans-area { 
            margin-top: 20px; padding: 20px; background: var(--accent); color: #0f0c29; 
            border-radius: 12px; cursor: pointer; text-align: left; font-weight: bold; 
            transition: 0.3s;
            position: relative;
        }
        
        /* äº’å‹•æ•ˆæœï¼šç­”æ¡ˆå¡å½ˆå‡º */
        .ans-area.active {
            animation: popCheck 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: white !important;
        }

        .refresh-btn {
            position: absolute; top: 20px; right: 20px;
            background: none; border: 1px solid var(--accent);
            color: var(--accent); padding: 5px 15px;
            border-radius: 8px; cursor: pointer;
            transition: 0.3s;
            z-index: 5;
        }
        .refresh-btn:hover { background: var(--accent); color: #0f0c29; transform: rotate(15deg); }
        .refresh-btn:active { transform: scale(0.9); }

        /* æ•¸å­—é–ƒçˆç‰¹æ•ˆ */
        .number-flash {
            display: inline-block;
            animation: flashGreen 0.4s ease;
        }

        /* ç²’å­å…ƒä»¶ */
        .confetti {
            position: absolute;
            width: 8px; height: 8px;
            pointer-events: none;
            border-radius: 20px;
            z-index: 99;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popCheck { 0% { transform: scale(0.95); } 100% { transform: scale(1); } }
        @keyframes flashGreen {
            0% { color: white; transform: scale(1.2); }
            100% { color: var(--accent); transform: scale(1); }
        }
    </style>
</head>

<body>
    <canvas id="mathBackground"></canvas>
    <a href="ms.html" class="home-float">ğŸ  å›åˆ°ä¸»é é¢</a>

    <div class="study-wrapper">
        <header style="text-align: center; margin-bottom: 30px;">
            <h1 style="font-size: 2.8rem; text-shadow: 0 0 15px var(--primary); margin: 0;">ğŸ“– è§€å¿µæ¢ç´¢ä¸­å¿ƒ</h1>
            <p style="opacity: 0.8;">2026 æ•¸ä½æ•¸å­¸èª²ï¼šç†è§£çœç•¥ï¼ŒæŒæ¡é€²ä½ï¼</p>
        </header>

    <div class="tab-group">
        <button class="tab-btn active" onclick="updatePage('ceil', this)">ç„¡æ¢ä»¶é€²ä½</button>
        <button class="tab-btn" onclick="updatePage('floor', this)">ç„¡æ¢ä»¶æ¨å»</button>
        <button class="tab-btn" onclick="updatePage('round', this)">å››æ¨äº”å…¥</button>
    </div>

        <div id="infoBox">
            <!-- å…§å®¹ç”± JS å‹•æ…‹æ³¨å…¥ -->
        </div>
    </div>

    <script src="ms.js"></script>
    <script>
        let currentMode = 'ceil';
        let currentExplanation = "";

        function rnd(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }

        // 2026 äº’å‹•æ•ˆæœï¼šå™´å°„ç²’å­
        function createConfetti(x, y) {
            const colors = ['#f1c40f', '#a29bfe', '#00b894', '#ff7675', '#ffffff'];
            for (let i = 0; i < 30; i++) {
                const div = document.createElement('div');
                div.className = 'confetti';
                div.style.left = x + 'px';
                div.style.top = y + 'px';
                div.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                document.body.appendChild(div);

                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 8 + 4;
                const vx = Math.cos(angle) * velocity;
                const vy = Math.sin(angle) * velocity;
                let opacity = 1;

                const move = () => {
                    div.style.left = (parseFloat(div.style.left) + vx) + 'px';
                    div.style.top = (parseFloat(div.style.top) + vy) + 'px';
                    opacity -= 0.02;
                    div.style.opacity = opacity;
                    if (opacity > 0) requestAnimationFrame(move);
                    else div.remove();
                };
                requestAnimationFrame(move);
            }
        }

        const studyData = {
            ceil: {
                title: "ğŸ”¼ è§€å¿µï¼šç„¡æ¢ä»¶é€²ä½",
                rule: "å–æ¦‚æ•¸åˆ°æŒ‡å®šä½æ•¸æ™‚ï¼Œå°‡è©²ä½æ•¸å¾Œçš„æ•¸å­—é€šé€š<span class='highlight'>çœç•¥</span>ã€‚åªè¦è¢«çœç•¥çš„æ•¸å­—<b>ä¸æ˜¯ 0</b>ï¼Œå°±è¦åœ¨å‰ä¸€ä½<b>é€² 1</b>ã€‚",
                formula: "4 3 <span class='cut-line'>|</span> 2 1 â†’ é€²ä½ â†’ <span class='highlight'>4 4 0 0</span>",
                tip: "æŠ€å·§ï¼šå–åˆ°ç™¾ä½å°±åœ¨ç™¾ä½å¾Œç•«ç·šï¼Œç·šå¾Œæœ‰æ•¸å­—ï¼Œç™¾ä½æ•¸å°±åŠ  1ã€‚"
            },
            floor: {
                title: "ğŸ”½ è§€å¿µï¼šç„¡æ¢ä»¶æ¨å»",
                rule: "å°‡æŒ‡å®šä½æ•¸å¾Œçš„æ•¸å­—é€šé€š<span class='highlight'>çœç•¥ï¼ˆè®Šç‚º 0ï¼‰</span>ã€‚ä¸ç®¡é‚£äº›æ•¸å­—æ˜¯å¤šå°‘ï¼Œéƒ½ä¸æœƒé€²ä½ã€‚",
                formula: "4 3 <span class='cut-line'>|</span> 8 9 â†’ æ¨å» â†’ <span class='highlight'>4 3 0 0</span>",
                tip: "æŠ€å·§ï¼šå–åˆ°ç™¾ä½ï¼Œä¸ç®¡å¾Œé¢çš„æ•¸å­—æœ‰å¤šå¤§ï¼Œé€šé€šåˆ‡æ‰è®Šæˆ 0ã€‚"
            },
            round: {
                title: "âš–ï¸ è§€å¿µï¼šå››æ¨äº”å…¥",
                rule: "è§€å¯ŸæŒ‡å®šä½æ•¸çš„<span class='highlight'>ä¸‹ä¸€ä½</span>ï¼šå¦‚æœæ˜¯ 0,1,2,3,4 å°±<span class='highlight'>æ¨å»</span>ï¼›å¦‚æœæ˜¯ 5,6,7,8,9 å°±<span class='highlight'>é€²ä½</span>ã€‚",
                formula: "4 3 <span class='cut-line'>|</span> <span style='color:#74b9ff'>6</span> 1 â†’ 6 æ»¿äº”é€²ä½ â†’ <span class='highlight'>4 4 0 0</span>",
                tip: "æŠ€å·§ï¼šå–åˆ°ç™¾ä½å°±çœ‹åä½ï¼Œåä½æ»¿ 5 å°±å¹«ç™¾ä½åŠ  1ã€‚"
            }
        };

        function updatePage(mode, btn) {
            if(btn) {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMode = mode;
            }
            
            const box = document.getElementById('infoBox');
            const concept = studyData[currentMode];
            const quiz = generatePractice(currentMode);
            currentExplanation = quiz.a;

            box.style.opacity = "0";
            setTimeout(() => {
                box.innerHTML = `
                    <div class="concept-card">
                        <h2 style="color:var(--primary); margin-top:0;">${concept.title}</h2>
                        <p>${concept.rule}</p>
                        <div class="formula-box">${concept.formula}</div>
                        <p style="font-size:0.95rem; opacity:0.8;">ğŸ’¡ ${concept.tip}</p>
                    </div>

                    <div class="practice-zone">
                        <button class="refresh-btn" onclick="updatePage('${currentMode}')">ğŸ”„ æ›ä¸€é¡Œç·´ç¿’</button>
                        <h4 style="margin:0; color:var(--accent);">ğŸ¯ éš¨æ©Ÿç·´ç¿’ï¼šæ‰¾æ‰¾åˆ‡å‰²ç·š</h4>
                        <p style="font-size:1.3rem; margin:15px 0;">é¡Œç›®ï¼š<span class="number-flash">${quiz.q}</span></p>
                        <div class="ans-area" id="ansBtn" onclick="revealAns(event)">é»æ“Šé¡¯ç¤ºã€Œçœç•¥èˆ‡é€²ä½ã€è§£æ</div>
                    </div>
                `;
                box.style.opacity = "1";
            }, 200);
        }

        function generatePractice(type) {
            const n = rnd(1100, 9999);
            const targets = [
                {name:'åä½', v:10, p:'å€‹ä½'}, 
                {name:'ç™¾ä½', v:100, p:'åä½'}, 
                {name:'åƒä½', v:1000, p:'ç™¾ä½'}
            ];
            const t = targets[rnd(0, 2)];
            
            if (type === 'ceil') {
                const rem = n % t.v;
                const res = rem === 0 ? n : (Math.floor(n/t.v)*t.v + t.v);
                return {
                    q: `å°‡ <span class="highlight">${n.toLocaleString()}</span> å–åˆ° <span class="highlight">${t.name}</span>æ˜¯å¤šå°‘ï¼Ÿ`,
                    a: `è§£æï¼šå–åˆ°${t.name}ï¼Œå¾Œé¢çš„çœç•¥éƒ¨åˆ†æ˜¯ ${rem}ã€‚${rem===0?'å› ç‚ºå¾Œæ–¹å‰›å¥½æ˜¯ 0ï¼Œä¸é€²ä½ã€‚':'å› ç‚ºå¾Œæ–¹ä¸æ˜¯ 0ï¼Œæ‰€ä»¥å‰ä¸€ä½è¦é€² 1ã€‚'}<br>ğŸ‘‰ ç­”æ¡ˆæ˜¯ï¼š<span class='highlight'>${res.toLocaleString()}</span>`
                };
            } else if (type === 'floor') {
                const res = Math.floor(n/t.v)*t.v;
                return {
                    q: `å°‡ <span class="highlight">${n.toLocaleString()}</span> å–åˆ° <span class="highlight">${t.name}</span>æ˜¯å¤šå°‘ï¼Ÿ`,
                    a: `è§£æï¼šå–åˆ°${t.name}ï¼Œä¸è«–å¾Œé¢æ•¸å­—æ˜¯å¤šå°‘ï¼Œé€šé€šçœç•¥è®Š 0ã€‚<br>ğŸ‘‰ ç­”æ¡ˆæ˜¯ï¼š<span class='highlight'>${res.toLocaleString()}</span>`
                };
            } else {
                const nextDigit = Math.floor((n % t.v) / (t.v / 10));
                const res = Math.round(n / t.v) * t.v;
                return {
                    q: `å°‡ <span class="highlight">${n.toLocaleString()}</span> å–åˆ° <span class="highlight">${t.name}</span>æ˜¯å¤šå°‘ï¼Ÿ`,
                    a: `è§£æï¼šå–åˆ°${t.name}ï¼Œè¦çœ‹ä¸‹ä¸€ä½(${t.p})ï¼Œä¸‹ä¸€ä½æ˜¯ ${nextDigit}ã€‚${nextDigit>=5?'æ»¿ 5 æ‰€ä»¥è¦é€²ä½ã€‚':'ä¸æ»¿ 5 æ‰€ä»¥ç›´æ¥æ¨å»ã€‚'}<br>ğŸ‘‰ ç­”æ¡ˆå¤§ç´„æ˜¯ï¼š<span class='highlight'>${res.toLocaleString()}</span>`
                };
            }
        }

        function revealAns(e) {
            const btn = document.getElementById('ansBtn');
            if(btn.classList.contains('active')) return;

            // è§¸ç™¼ç²’å­ç‰¹æ•ˆ
            const x = e.pageX || (window.innerWidth/2);
            const y = e.pageY || (window.innerHeight/2);
            createConfetti(x, y);

            btn.innerHTML = currentExplanation;
            btn.classList.add('active');
            btn.style.color = "#0f0c29";
            btn.onclick = null;
        }

        window.onload = () => updatePage('ceil', document.querySelector('.tab-btn'));
    </script>
</body>
</html>
